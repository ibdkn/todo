<div class="board">
  <div class="board__header">
    <h2 class="board__name">Board name</h2>
    <div class="new-item">
      <app-create-item-form [itemName]="'column'" (created)="createTodolist($event)" [buttonClass]="'create-btn'"/>
    </div>
  </div>
  <div class="board__content">
    <div class="todolist-list" cdkDropList cdkDropListOrientation="horizontal" [cdkDropListData]="todolists()"
         (cdkDropListDropped)="onDrop($event)">
      @if (todolists() && todolists().length > 0) {
        @for (todolist of todolists(); track todolist.id) {
          <div class="todolist-list__wrapper" cdkDrag>
            <div class="todolist-list__header" cdkDragHandle>
              <i class="fa fa-grip-vertical"></i>
            </div>
            <app-todolist
              [todolist]="todolist"
              [tasks]="getFilteredTasks(tasks()[todolist.id], todolist.filter)"
              [title]="todolist.title"
              (created)="createTask(todolist.id, $event)"
              (deleted)="deleteTask(todolist.id, $event)"
              (statusChanged)="changeTaskStatus(todolist.id, $event)"
              (filtered)="changeFilter(todolist.id, $event)"
              (taskTitleChanged)="updateTaskTitle(todolist.id, $event)"
              (todolistTitleChanged)="updateTodolistTitle(todolist.id, $event)"
              (confirmDialogOpened)="openConfirmDialog(todolist.id)"
            ></app-todolist>
          </div>
        }
      }
    </div>
  </div>
</div>
@if (isConfirmDialogOpen) {
  <app-confirm-dialog (closed)="handleDialogClosed($event)"/>
}
